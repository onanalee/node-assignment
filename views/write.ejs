<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.5.1.js"
      integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
      integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
      integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>    
    
    <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
        <link rel='stylesheet' href="/static/mycss.css">
    <title>일지 쓰기</title>
    <link rel="icon" href="/static/ball.png">
    <script>
    
    function posting(){
      let title1 = $('#title').val()
      let subtitle1 = $('#subtitle').val()
      let category1 = $('#category').val()
      let context1 = $('#context').val()

      $.ajax({
        type: "POST",
        url: 'api/posts',
        data:{
          title: title1,
          subtitle: subtitle1,
          category: category1,
          context: context1
        },
        success: function(response) {
            if (response["result"] == "success") {
                alert("저장완료");
                window.location.href= " /list "
            }
      }
    })
  }

    </script>
</head>
<body>
<nav class="navbar is-info">
    <div class="navbar-brand">
      <a class="navbar-item" href="/" >
        나만의 항해일지
      </a>
      <div class="navbar-burger burger" data-target="navbarExampleTransparentExample">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  
      <div class="navbar-end">
        <div class="navbar-item">
          <div class="field is-grouped">
            <p class="control" style="padding-top: 10px;">
              <a class="bd-tw-button button" href="">
                <span>
                  Velog
                </span>
              </a>
            </p>
            <p class="control" style="padding-top: 10px;">
              <a class="button is-primary" href="/list">
                <span>일지목록</span>
              </a>
            </p>
            <p class="control" style="padding-top: 10px;">
              <a class="button is-danger" href="/write">
                <span>일지쓰기</span>
              </a>
            </p>
          </div>
        </div>
      </div>
  </nav>
<div class="writeWrap">
    <div style="margin: 10px;" class="label"> 제목
        <input id="title" class="input" type="text" placeholder="Title">
    </div>
    <div style="margin: 10px;" class="label"> 부제목
        <input id="subtitle" class="input" type="text" placeholder="Subtitle">
    </div>
    <div style="margin: 10px;" class="label">카테고리
        <div class="select">
            <select style="width: 100%;" id="category">
                <option value="til">TIL</option>
                <option value="algo">알고리즘</option>
                <option value="review">회고</option>
            </select>
        </div>     
    </div>
    <div style="margin: 10px;">
    <textarea id="context" class="textarea" placeholder="Context" rows="10"></textarea>
    </div>
    <div style="float: right;">
    <button class="button is-light" style="width: 100px; margin: 5px;">취소</button>
    <button class="button is-success" style="width: 100px; margin: 5px;" onclick="posting()" >저장</button>
    </div>
</div>


</body>
</html>